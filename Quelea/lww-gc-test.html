<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Quelea : A Haskell library for declarative programming over eventually consistent store (Cassandra).">

    <link rel="stylesheet" type="text/css" media="screen" href="/Quelea/stylesheets/stylesheet.css">

    <title>Quelea</title>
  </head>

  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kayceesrk/Quelea">View on GitHub</a>

          <h1 id="project_title"><a href="/Quelea/index.html">Quelea</a></h1>
          <h2 id="project_tagline">A Haskell library for declarative programming over eventually consistent store (Cassandra).</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/gowthamk/Quelea/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/gowthamk/Quelea/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

        <h2>LWW GC Benchmark</h2>
<!-- p class="meta">12 Feb 2015</p -->

<div class="post">
<p>Quelea’s programming model encourages programmers to define operations
on a replicated data object as <em>folds</em> over effects accumulated over
the object. A straightforward implementation, which lets effects to
simply accumulate over time would not scale. Quelea implements effect
summarization (or, garbage collection), which is the key to ensure
that the programming model remains practical and competitive to
alternative models. The aim of this benchmark is to facilitate
experiments to demonstrate the impact of garbage collection. We use
Last-Writer-Wins register operations for this purpose.</p>

<h3 id="building-the-benchmark">Building the benchmark</h3>

<p>Navigate to <code>~/git/Codeec/tests/LWW</code> and run <code>make LWW_1key</code>. It
produces one binary named <code>LWW_1key</code>.</p>

<h3 id="running-the-benchmark">Running the benchmark</h3>

<p><code>LWW_1key</code> implements three garbage collection policies - <code>No_GC</code>,
<code>GC_Mem_Only</code>, and <code>GC_Full</code>, each corresponding to a different curve
on Fig. 9(d) of the <a href="http://gowthamk.github.io/docs/quelea.pdf">paper</a>. We conduct three
experiments with the binary, each lasting for 1 minute and employing
different garbage collection strategy. For 1 minute, clients keep
making write and read requests (with an inter-request delay of 1ms
(1000 μs)) to a single LWW register object. For each GC strategy, we
then measure how many client requests have been served under 1 minute.</p>

<h4 id="no-gc">No GC</h4>

<p>Corresponds to Quelea with no effect summarization. The command to run
is:</p>

<pre><code>./LWW_1key --kind Daemon --numRounds 10000 --numThreads 2 --measureLatency --gcSetting No_GC --terminateAfter 60
</code></pre>

<p><img src="/Quelea/assets/lww-gc-ngc.png" alt="lww-gc-ngc" /></p>

<p>Ignore the <em>Unconfigured column family</em> errors, if any; these are
generated by outstanding requests after 60s timout has been reached,
and Cassandra column families have been dropped. However, if there are
any <code>ZMQError</code> messages, please refer to the <a href="/Quelea/troubleshooting.html">troubleshooting guide</a> 
for a quick fix.</p>

<h4 id="gc-in-memory-only">GC in memory only</h4>

<p>This is the case where Quelea does garbage collection only in the
memory, but not on the disk. The command to run is:</p>

<pre><code>./LWW_1key --kind Daemon --numRounds 10000 --numThreads 2 --measureLatency --gcSetting GC_Mem_Only --terminateAfter 60
</code></pre>

<p><img src="/Quelea/assets/lww-gc-mgc.png" alt="lww-gc-mgc" /></p>

<h4 id="full-gc">Full GC</h4>

<p>Corresponds to Quelea with effect summarization in both memory and
disk. The command to run is:</p>

<pre><code>./LWW_1key --kind Daemon --numRounds 10000 --numThreads 2 --measureLatency --gcSetting GC_Full --terminateAfter 60
</code></pre>

<p><img src="/Quelea/assets/lww-gc-fgc.png" alt="lww-gc-fgc" /></p>

<h3 id="observations">Observations</h3>

<p>As sample runs demonstrate, you should be able to observe that Quelea
with effect summarization is orders of magnitude more scalable than
one without.</p>

</div>
<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/javascript">
MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
</script>


      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Quelea maintained by <a
        href="https://github.com/kayceesrk">KC Sivaramakrishnan</a>
        and <a
        href="https://github.com/gowthamk">Gowtham Kaki</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

  </body>
</html>
